<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Tutorial</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <h1 class="manual-toc-title"><a href="manual/installation.html" data-ice="title">Installation</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#installing-savannah" data-ice="link">Installing Savannah</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#node-js" data-ice="link">Node.js</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#git" data-ice="link">git</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#savannah" data-ice="link">Savannah</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#editor" data-ice="link">Editor</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#what-s-next" data-ice="link">What&apos;s next</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="tutorial">
    <h1 class="manual-toc-title"><a href="manual/tutorial.html" data-ice="title">Tutorial</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/tutorial.html#getting-started" data-ice="link">Getting started</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/tutorial.html#creating-a-project" data-ice="link">Creating a project</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/tutorial.html#experiment" data-ice="link">Experiment</a></li>
<li data-ice="manualNav" class="indent-h3"><span class="manual-dot"></span><a href="manual/tutorial.html#bouncing-bullets" data-ice="link">Bouncing bullets</a></li>
<li data-ice="manualNav" class="indent-h3"><span class="manual-dot"></span><a href="manual/tutorial.html#fps-camera" data-ice="link">FPS camera</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/tutorial.html#what-next-" data-ice="link">What next?</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <h1 class="manual-toc-title"><a href="manual/usage.html" data-ice="title">Usage</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#concepts" data-ice="link">Concepts</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#networking" data-ice="link">Networking</a></li>
<li data-ice="manualNav" class="indent-h3"><span class="manual-dot"></span><a href="manual/usage.html#state" data-ice="link">State</a></li>
<li data-ice="manualNav" class="indent-h3"><span class="manual-dot"></span><a href="manual/usage.html#rpc" data-ice="link">RPC</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#entity-component-model" data-ice="link">Entity - Component model</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#prefabs" data-ice="link">prefabs</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#events" data-ice="link">Events</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#scenes" data-ice="link">Scenes</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#lifecycle" data-ice="link">Lifecycle</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <h1 class="manual-toc-title"><a href="identifiers.html" data-ice="title">Reference</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#function" data-ice="link">Function</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#variable" data-ice="link">Variable</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Tutorial</span>
  </div>
  <div data-ice="content"><h1 id="getting-started">Getting started</h1>
<p>This tutorial is an introduction by example to Savannah. Since the documentation 
is rather sparse at the moment, I would suggest anyone interested in this project to go
through this tutorial first.</p>
<p>First, make sure you installed the cli as described in the <a href="https://hmil.github.io/savannah/docs/manual/installation.html">installation</a> section.</p>
<h2 id="creating-a-project">Creating a project</h2>
<p>To create a project, navigate to your working directory and run</p>
<p><code>savannah new my_project</code></p>
<p>This command creates a new savannah project using the default template in a folder called <code>my_project</code>.<br>Next, copy the contents of <code>savannah/savannah-core/src</code> to <code>my_project/src/core</code>.</p>
<p><code>cp -r /path/to/savannah/savannah-core/src my_project/src/core</code></p>
<p>You may wonder why <code>savannah new</code> did not take care of this as well. The answer is that it will
at some point, it&apos;s just not implemented yet.</p>
<p>The default template is actually a playable game so let&apos;s try it out:</p>
<pre><code class="lang-sh"><code class="source-code prettyprint">cd my_project
savannah run</code>
</code></pre>
<p>You can now open a browser window at <a href="http://localhost:3000/">http://localhost:3000/</a> and play around with the example game.</p>
<p>Use [wsad] keys (or [zsqd] depending on your keyboard) to move your pawn and [space] to fire bullets. 
Open a second browser window to the same address to see the multiplayer capabilities of savannah.</p>
<p><em>info:</em> Savannah is built around a <em>multiplayer first</em> approach which means that this
kind of multiplayer interaction comes out of the box as you&apos;ll see later!</p>
<h2 id="experiment">Experiment</h2>
<p>Now that you know how to create a savannah app, let&apos;s see what&apos;s under the hood.</p>
<p>First notice the directory structure:<br>Your project contains an <code>src/</code> folder which is all you need to worry about.</p>
<p>The <code>src/</code> folder is partitioned as follows:</p>
<pre><code><code class="source-code prettyprint">src/
|
+- compoents/
+- core/
+- scenes/
+- Client.js
+- prefabs.js
+- Server.js</code>
</code></pre><p>Let&apos;s break it down:</p>
<ul>
<li><strong>components/</strong> contains most of your game logic in <a href="https://hmil.github.io/savannah/docs/class/src/Component.js~Component.html">components</a>
as described in the <a href="https://hmil.github.io/savannah/docs/manual/usage.html#entity-component-model">components</a> concepts section.</li>
<li><strong>core/</strong> contains the core Savannah library. You can learn more about the core library in the <a href="https://hmil.github.io/savannah/docs/identifiers.html">documentation</a>.
This folder is reserved for built-in stuff, you should not change anything in there.</li>
<li><strong>scenes/</strong> contains all of your game <a href="https://hmil.github.io/savannah/docs/class/src/Scene.js~Scene.html">scenes</a>.</li>
<li><strong>Client.js</strong> is the entry point when the game is launched on a client.</li>
<li><strong>Server.js</strong> is the entry point when the game is launched on a server.</li>
<li><strong>prefabs.js</strong> contains all of your game <a href="https://hmil.github.io/savannah/docs/manual/usage.html#prefabs">prefabs</a>.</li>
</ul>
<p>You don&apos;t need to read all of the linked documentation at the moment. Just follow
this tutorial and go back to the documentation when you need it.</p>
<p>Now on to adding features to our game!</p>
<h3 id="bouncing-bullets">Bouncing bullets</h3>
<p>First we want to enhance the Bullets. Open the file <code>src/components/Bullet.js</code>.
You will see a method named <code>onCollision</code>. This method is triggered by the <a href="https://hmil.github.io/savannah/docs/class/src/components/Physics.js~Physics.html">Physics</a>
component whenever a collision occurs.<br>Take a moment to understand what this function does.</p>
<p>Now let&apos;s try to make the bullets bounce when they touch the world boundaries instead of
just disappearing.
Uncomment the following lines:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">if (evt.vx !== 0) {
 this.physics.vx = -this.physics.vx;
} else if (evt.vy !== 0) {
 this.physics.vy = -this.physics.vy;
}</code>
</code></pre>
<p>and remove the call to <code>destroy()</code> indicated by a comment:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// TUTORIAL: remove the next line
this.destroy();</code>
</code></pre>
<p>Kill the server instance if it was running (CTRL+C) and start a fresh one with
<code>savannah run</code></p>
<p>Refresh your browser window and you should clearly see the result of our modification.</p>
<p><strong>note:</strong> You must reload the server each time you change something in the game, otherwise
the client and the server run different versions of the code and errors will occur.</p>
<h3 id="fps-camera">FPS camera</h3>
<p>The next hack is a bit more involved. We want to bind the camera to the player&apos;s
pawn such that the pawn is always in the middle of the viewport.</p>
<p>To do so, open <code>src/prefabs.js</code>.
In the definition of the <code>Pawn</code> prefab, you&apos;ll see a commented line:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// { comp: CameraComp },</code>
</code></pre>
<p>Uncomment it. This will bind a new camera to each created pawn.</p>
<p>Now we need to make sure that only the camera bound to the pawn owned by the current
player is active (ie. We don&apos;t want to follow another player&apos;s pawn). To this end,
open <code>src/components/Pawn.js</code>. This component is attached to the Pawn prefab and
defines most of a its behavior. In <code>onCreate()</code>, you&apos;ll see three commented lines
of code.
Uncomment them all:  </p>
<pre><code class="lang-js"><code class="source-code prettyprint">// import Camera from &apos;core/components/Camera.js&apos;;

...

// this.getComponent(Camera).backgroundColor = &apos;#000&apos;;

if (game.playerId != this.entity.parent.id) {
  this.getComponent(Input).disable();
  // this.getComponent(Camera).disable();
}</code>
</code></pre>
<p>The first one imports the Camera component definition used below. The second line
tells the camera to render a black background.<br>The last one lives within a conditional block which tests whether this pawn is 
owned by the current player. If it is not the case, then the camera is disabled.</p>
<p>The last tweak we need to do is to get rid of the original camera. This one was 
created in the <code>scenes/MainScene.js</code> file.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">this.newPrefab(Camera);</code>
</code></pre>
<p>Remove this line because we don&apos;t need a global camera anymore. Restart the game server.<br>The camera now follows your pawn!</p>
<p>You&apos;ll notice that the image freezes when the pawn is destroyed. This is because the camera is destroyed
with the pawn.</p>
<p>Now, one last task before you go: There&apos;s a way to respawn once your pawn died. Try to figure it out!
<em>hint: The answer is in <code>src/components/Player.js</code></em> </p>
<h2 id="what-next-">What next?</h2>
<p>Well done! You went through the introductory tutorial. You should now have
a vague idea of how a Savannah game works. To dig in more depth, I recommend you read the
following:</p>
<ul>
<li>The source of <a href="https://github.com/hmil/savannah/blob/master/savannah-cli/templates/shooter/src/components/Pawn.js">Pawn.js</a>
and <a href="https://github.com/hmil/savannah/blob/master/savannah-cli/templates/shooter/src/components/Player.js">Player.js</a></li>
<li>The <a href="https://hmil.github.io/savannah/docs/manual/usage.html#concepts">concepts</a> documentation page which covers in more depth fundamental concepts of the Savannah framework.</li>
</ul>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.6)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
